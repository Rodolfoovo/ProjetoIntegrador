{% extends 'navbar.html' %}
{% load static %}
{% block title %}Transacao{% endblock %}
{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/transasao.css' %}">
{% endblock %}
    
{% block content%}
<div class="container-table">
    <div class="rectangle">
        <form class="d-flex align-items-center">
            <input class="form-control me-2 w-100" type="search" id="searchInput" placeholder="Pesquisar" aria-label="Search">
            <button class="btn btn-search" type="submit">
                <i class="bi bi-search"></i>
            </button>
        </form>
    </div>
    <table class="table table-bordered table-responsive-lg">
      <thead class="table-dark">
          <tr>
              <th scope="col">Operação</th>
              <th scope="col">Produto</th>
              <th scope="col">Quantidade</th>
              <th scope="col">Data</th>
              <th scope="col">Horário</th>
              <th scope="col">Valor total</th>
              <th scope="col">Fornecedor</th>
          </tr>
      </thead>
      <tbody id="transTable">
        {% for transacao in transacoes%}
            <tr style="background-color: #90EE90;">  
            <td>{{transacao.tipoTransacao}}</td>
            <td>Danone</td>
            <td>Caixa-12-unidades</td>
            <td>{{transacao.dataTransacao | date:'d/m/Y'}}</td>
            <td>{{transacao.horaTransacao | time:'H:i'}}</td>
            <td>R$43,99</td>
            <td>Batavo</td>
          </tr>
          {% endfor %}
          {% for produto in produtos%}
           <td>{{produto.nomeProduto}}</td>
          {% endfor %}
          <tr style="background-color: #fc6565;"> 
            <td>Saída</td>
            <td>Batata-Palha</td>
            <td>3</td>
            <td>03/09/2024</td>
            <td>18:30</td>
            <td>R$13,99</td>
            <td>Elma Chips</td>
          </tr>
      </tbody>
  </table>
    <!-- 
    <table class="table table-striped table-responsive-lg">
        <thead class="table-dark">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Produto</th>
                <th scope="col">Horário</th>
                <th scope="col">Tipo</th>
                <th scope="col">Fornecedor ou Cliente</th>
            </tr>
        </thead>
        <tbody id="transTable">
            {% for transacao in transacoes %}
            <tr>
                <!--teoricamente esses vao ser os valores eu acho 
                <td>{{ transacao.idTransacao }}</td>
                <td>{{ transacao.produto }}</td>
                <td>{{ transacao.idDataTransacao }}</td>
                <td>{{ transacao.tipoTransacao }}</td>
                <td>{{ transacao.clienteFornecedor }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    -->
</div>

<script>
    document.getElementById('searchInput').addEventListener('keyup', function() {
  var input = this.value.toLowerCase();
  var rows = document.querySelectorAll('#transTable tr');
  rows.forEach(function(row) {
    var cells = row.querySelectorAll('td');
    var match = false;
    cells.forEach(function(cell) {
      if (cell.textContent.toLowerCase().includes(input)) {
        match = true;
      }
    });
    row.style.display = match || input === '' ? '' : 'none';
  });
});
</script>
{% endblock %}