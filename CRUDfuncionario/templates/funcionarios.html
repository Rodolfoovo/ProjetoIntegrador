{% extends 'navbar.html' %}
{% load static %}
{% block title %}Funcionários{% endblock %}
{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/funcionario.css' %}">
{% endblock %}
    
{% block content%}

<div class="container-table">
    <div class="rectangle">
        <form class="d-flex align-items-center">
            <input class="form-control me-2 w-100" type="search" id="searchInput" placeholder="Pesquisar" aria-label="Search">
            <button class="btn btn-search" type="submit">
                <i class="bi bi-search"></i>
            </button>
        </form>
        <a href="{% url 'cadastrarFuncionario_view' %}" class="btn btn-dark ms-auto">Cadastrar Funcionário</a>
    </div>
        
    <table class="table table-striped table-responsive-lg">
        <thead class="table-dark">
                <tr>
                <th scope="col">ID</th>
                <th scope="col">Username</th>
                <th scope="col">Endereço</th>
                <th scope="col">CPF</th>
                <th scope="col">CEP</th>
                <th scope="col">Telefone</th>
                <th scope="col">E-mail</th>
                <th scope="col" colspan="2">Gerenciar</th>
            </tr>
        </thead>
        <tbody id="funcTable">
            {% for funcionario in funcionarios %}
            <tr>
                <td>{{ funcionario.idFuncionario }}</td>
                <td>{{ funcionario.username }}</td>
                <td>{{ funcionario.enderecoFuncionario }}</td>
                <td>{{ funcionario.CPF }}</td>
                <td>{{ funcionario.CEP }}</td>
                <td>{{ funcionario.telefone }}</td>
                <td>{{ funcionario.email }}</td>
                <td>
                    <a href="{% url 'editarFuncionario_view' funcionario.idFuncionario %}" class="btn btn-outline-primary btn-sm">Editar</a>
                </td>
                <td>
                    <a href="{% url 'deleteFuncionario_view' funcionario.idFuncionario %}" class="btn btn-outline-danger btn-sm">Deletar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    document.getElementById('searchInput').addEventListener('keyup', function() {
      var input = this.value.toLowerCase();
      var rows = document.querySelectorAll('#funcTable tr'); 
      rows.forEach(function(row) {
        var cells = row.querySelectorAll('td');
        var match = false;
        cells.forEach(function(cell) {
          if (cell.textContent.toLowerCase().includes(input)) {
            match = true;
          }
        });
        row.style.display = match || input === '' ? '' : 'none';
      });
    });
  </script>
{% endblock %}
